import react, { useState } from 'react';
import { useNavigate } from 'react-router-dom';
import '../styles/login.css';
import { Link } from 'react-router-dom';
import Button from '../components/Button';
import users from '../data/users.json';
import loginImg from '../assets/bg-img4.jpg';

function Login() {
    const [email, setEmail] = useState('');
    const [password, setPassword] = useState('');
    const [error, setError] = useState('');
    const navigate = useNavigate();

    const handleLogin = (e) => {
        e.preventDefault();

        const user = users.find(
            (user) => user.email === email && user.password === password
        );

        if (user) {
            if (user.role === 'landlord') {
                localStorage.setItem('loggedInLandlordId', user.id);
                navigate('/landlord-dashboard');
            } else {
                setError('Access denied');
            }
        } else {
            setError('Invalid email or password.');
        }
    };

    return (
        <section className='login-page'>
            <div className='login-div'>
                <div className='logo'>
                    <Link to="/">
                        <svg width="160" viewBox="0 0 428 65" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M0 23H26.0177V62.5814C26.0177 63.4676 25.3045 64.1861 24.4248 64.1861H1.59292C0.713174 64.1861 0 63.4676 0 62.5814V23Z" fill="CurrentColor" className='svg-color' />
                            <path d="M21.5657 0.490309C21.8658 0.176977 22.2796 0 22.7118 0H44.0735C45.4736 0 46.1926 1.68886 45.2276 2.71069L26.0177 23H0L21.5657 0.490309Z" fill="CurrentColor" className='svg-color' />
                            <path d="M41.9469 37.9767C41.9469 36.7951 42.8978 35.8372 44.0708 35.8372H57.8761C59.0491 35.8372 60 36.7951 60 37.9767V62.0465C60 63.2281 59.0491 64.1861 57.8761 64.1861H44.0708C42.8978 64.1861 41.9469 63.2281 41.9469 62.0465V37.9767Z" fill="CurrentColor" className='svg-color' />
                            <path d="M131.472 18.514V63.1861H122.512V44.178H103.376V63.1861H94.416V18.514H103.376V36.882H122.512V18.514H131.472Z" fill="CurrentColor" className='svg-color' />
                            <path d="M156.035 63.7621C152.622 63.7621 149.55 63.0154 146.819 61.522C144.088 59.986 141.934 57.8314 140.355 55.0581C138.819 52.2847 138.051 49.0847 138.051 45.458C138.051 41.8314 138.84 38.6314 140.419 35.858C142.04 33.0847 144.238 30.9514 147.011 29.458C149.784 27.922 152.878 27.154 156.291 27.154C159.704 27.154 162.798 27.922 165.571 29.458C168.344 30.9514 170.52 33.0847 172.099 35.858C173.72 38.6314 174.531 41.8314 174.531 45.458C174.531 49.0847 173.699 52.2847 172.035 55.0581C170.414 57.8314 168.195 59.986 165.379 61.522C162.606 63.0154 159.491 63.7621 156.035 63.7621ZM156.035 55.954C157.656 55.954 159.171 55.57 160.579 54.802C162.03 53.9914 163.182 52.7967 164.035 51.218C164.888 49.6394 165.315 47.7194 165.315 45.458C165.315 42.0874 164.419 39.5061 162.627 37.7141C160.878 35.8794 158.723 34.9621 156.163 34.9621C153.603 34.9621 151.448 35.8794 149.699 37.7141C147.992 39.5061 147.139 42.0874 147.139 45.458C147.139 48.8287 147.971 51.4314 149.635 53.2661C151.342 55.0581 153.475 55.954 156.035 55.954Z" fill="CurrentColor" className='svg-color' />
                            <path d="M225.135 27.218C229.487 27.218 232.986 28.562 235.632 31.25C238.319 33.8954 239.663 37.6074 239.663 42.386V63.1861H230.704V43.6021C230.704 40.8287 230 38.7167 228.592 37.266C227.184 35.7727 225.263 35.026 222.831 35.026C220.399 35.026 218.458 35.7727 217.008 37.266C215.6 38.7167 214.896 40.8287 214.896 43.6021V63.1861H205.936V43.6021C205.936 40.8287 205.232 38.7167 203.824 37.266C202.416 35.7727 200.496 35.026 198.064 35.026C195.589 35.026 193.626 35.7727 192.176 37.266C190.768 38.7167 190.064 40.8287 190.064 43.6021V63.1861H181.104V27.73H190.064V32.0181C191.216 30.5247 192.688 29.3514 194.48 28.498C196.314 27.6447 198.319 27.218 200.495 27.218C203.269 27.218 205.743 27.8154 207.919 29.01C210.095 30.162 211.781 31.826 212.975 34.002C214.127 31.954 215.791 30.3114 217.967 29.074C220.186 27.8367 222.575 27.218 225.135 27.218Z" fill="CurrentColor" className='svg-color' />
                            <path d="M281.126 44.69C281.126 45.97 281.041 47.122 280.87 48.146H254.95C255.163 50.706 256.059 52.7114 257.638 54.162C259.217 55.6127 261.158 56.3381 263.462 56.3381C266.79 56.3381 269.158 54.9087 270.566 52.05H280.23C279.206 55.4634 277.243 58.2794 274.342 60.4981C271.441 62.6741 267.878 63.7621 263.654 63.7621C260.241 63.7621 257.169 63.0154 254.438 61.522C251.75 59.986 249.638 57.8314 248.102 55.0581C246.609 52.2847 245.862 49.0847 245.862 45.458C245.862 41.7887 246.609 38.5674 248.102 35.794C249.595 33.0207 251.686 30.8874 254.374 29.3941C257.062 27.9007 260.155 27.154 263.654 27.154C267.025 27.154 270.033 27.8794 272.678 29.33C275.366 30.7807 277.435 32.85 278.886 35.538C280.379 38.1834 281.126 41.234 281.126 44.69ZM271.846 42.1301C271.803 39.8261 270.971 37.9914 269.35 36.626C267.729 35.218 265.745 34.514 263.398 34.514C261.179 34.514 259.302 35.1967 257.766 36.562C256.273 37.8847 255.355 39.7407 255.014 42.1301H271.846Z" fill="CurrentColor" className='svg-color' />
                            <path d="M325.874 63.1861H316.914L296.626 32.53V63.1861H287.666V18.45H296.626L316.914 49.1701V18.45H325.874V63.1861Z" fill="CurrentColor" className='svg-color' />
                            <path d="M367.689 44.69C367.689 45.97 367.603 47.122 367.432 48.146H341.513C341.726 50.706 342.622 52.7114 344.201 54.162C345.779 55.6127 347.721 56.3381 350.025 56.3381C353.353 56.3381 355.721 54.9087 357.129 52.05H366.793C365.769 55.4634 363.806 58.2794 360.905 60.4981C358.003 62.6741 354.44 63.7621 350.216 63.7621C346.803 63.7621 343.731 63.0154 341 61.522C338.312 59.986 336.2 57.8314 334.664 55.0581C333.171 52.2847 332.424 49.0847 332.424 45.458C332.424 41.7887 333.171 38.5674 334.664 35.794C336.158 33.0207 338.248 30.8874 340.936 29.3941C343.624 27.9007 346.718 27.154 350.216 27.154C353.587 27.154 356.595 27.8794 359.241 29.33C361.929 30.7807 363.998 32.85 365.448 35.538C366.942 38.1834 367.689 41.234 367.689 44.69ZM358.409 42.1301C358.366 39.8261 357.534 37.9914 355.913 36.626C354.291 35.218 352.307 34.514 349.961 34.514C347.742 34.514 345.864 35.1967 344.328 36.562C342.835 37.8847 341.918 39.7407 341.577 42.1301H358.409Z" fill="CurrentColor" className='svg-color' />
                            <path d="M387.797 63.7621C384.895 63.7621 382.292 63.2501 379.988 62.2261C377.684 61.1594 375.85 59.73 374.484 57.938C373.162 56.146 372.437 54.1621 372.309 51.986H381.332C381.503 53.3514 382.164 54.4821 383.316 55.3781C384.511 56.2741 385.983 56.722 387.733 56.722C389.439 56.722 390.762 56.3807 391.701 55.6981C392.682 55.0154 393.172 54.1407 393.172 53.0741C393.172 51.9221 392.575 51.0687 391.38 50.514C390.228 49.9167 388.373 49.2767 385.812 48.594C383.167 47.954 380.991 47.2927 379.284 46.6101C377.62 45.9274 376.17 44.882 374.932 43.474C373.738 42.066 373.141 40.1674 373.141 37.778C373.141 35.8154 373.695 34.0234 374.805 32.402C375.957 30.7807 377.578 29.5007 379.668 28.562C381.802 27.6234 384.298 27.154 387.156 27.154C391.38 27.154 394.751 28.2207 397.268 30.354C399.786 32.4447 401.172 35.2821 401.428 38.8661H392.853C392.725 37.4581 392.127 36.3487 391.06 35.538C390.036 34.6847 388.65 34.258 386.901 34.258C385.279 34.258 384.021 34.5567 383.125 35.154C382.271 35.7514 381.845 36.5834 381.845 37.65C381.845 38.8447 382.442 39.762 383.637 40.4021C384.831 40.9994 386.687 41.618 389.204 42.258C391.764 42.898 393.876 43.5594 395.54 44.2421C397.204 44.9247 398.634 45.9914 399.828 47.4421C401.066 48.8501 401.706 50.7274 401.749 53.0741C401.749 55.1221 401.173 56.9567 400.021 58.578C398.911 60.1994 397.29 61.4794 395.156 62.418C393.066 63.314 390.613 63.7621 387.797 63.7621Z" fill="CurrentColor" className='svg-color' />
                            <path d="M419.535 35.09V52.2421C419.535 53.4367 419.813 54.3114 420.367 54.8661C420.965 55.3781 421.946 55.634 423.311 55.634H427.471V63.1861H421.84C414.288 63.1861 410.512 59.5167 410.512 52.1781V35.09H406.288V27.73H410.512V18.962H419.535V27.73H427.471V35.09H419.535Z" fill="CurrentColor" className='svg-color' />
                        </svg>
                    </Link>
                </div>
                <div className='login-header'>
                    <h2>Login</h2>
                    <p>Welcome Back! Login to access your dashboard!</p>
                </div>
                <form onSubmit={handleLogin} className='login-form'>
                    <div className='input-field'>
                        <label htmlFor='email'>Email</label>
                        <input
                            id='email'
                            type="text"
                            placeholder="user@example.com"
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                        />
                    </div>
                    <div className='input-field'>
                        <label htmlFor='password'>Password</label>
                        <input
                            id='password'
                            type="password"
                            placeholder="Enter your password"
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                        />
                    </div>

                    <Button text={"Log-in"} color='secondary' onClick={handleLogin} />
                </form>
                {error && <p style={{ color: 'red' }}>{error}</p>}
            </div>
            <div className='img-side'>
                <img src={loginImg} alt="Side Image" />
            </div>
        </section>
    );
}

export default Login;